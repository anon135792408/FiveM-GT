<html>

<head>
	<script src="nui://game/ui/jquery.js" type="text/javascript"></script>


	<link rel="stylesheet" href="nui://FiveM-GT/html/countdown-style.css">
</head>

<body hidden>
	<div class="ui">
		<h1 id="digits" hidden>x</h1>
		<div class="position">
			<h1>1st</h1>
		</div>
	</div>

	<audio class="countdown">
		<source src="" type="audio/mpeg">
	</audio>

	<script type="text/javascript">


		//Vars
		var musicVolume = 1;
		var text = ["3", "2", "1", "START"];
		var counter = 0;
		var elem = document.getElementById("digits");
		var inst = null;

		//Javascript Audios
		var introSound = new Audio('intro.mp3');
		var countdownSound = new Audio('countdown.mp3');
		var music = new Audio("music/justaday.mp3");

		function startCountdown() {
			countdownSound.currentTime = 0;
			inst = setInterval(change, 1000);
		}

		function startRaceIntro() {
			$('body').show();
			introSound.currentTime = 0;
			introSound.play();
		}

		//Set the music volume from a variable passed in from userconfig
		function setMusicVolume(vol) {
			musicVolume = parseFloat(vol);
		}

		//Update the countdown tiemr
		function change() {
			countdownSound.play();
			$('#digits').show();

			elem.innerHTML = text[counter];
			counter++;
			if (counter >= text.length + 1) {
				clearInterval(inst);
				counter = 0;
				$('#digits').hide();
			}
		}

		//Plays a random song from the html/music library, must be added to __resource.lua
		function playRandomSong() {
			var sounds = [
				"music/aisha.mp3",
				"music/justaday.mp3"
			];

			music = new Audio(sounds[Math.floor(Math.random()*sounds.length)]);
			music.currentTime = 0;
			music.volume = musicVolume;
			music.play();
		}
	</script>

	<script src="listener.js" type="text/javascript"></script>


</body>

</html>